<lift:surround with="body" at="body">
    <head_merge>
        <title>heystk - Agents</title>
        <script src="/static/js/agents.js"></script>
        <script class="lift:AgentSnippet.getAgentList?callback=loadAgents"></script>
        <script class="lift:AgentSnippet.createAgent?callback=agentCreated"></script>
        <script class="lift:AgentSnippet.deleteAgents?callback=getAgentList"></script>
        <script class="lift:AgentSnippet.generateConfig?callback=showAgentConfig"></script>
    </head_merge>
    <section class="container">
        <section class="container" ng-controller="AgentsController">
            <input type="button" class="btn btn-primary" value="New Agent" ng-show="canCreateAgent()" ng-click="createAgent()" />
            <input type="button" class="btn btn-danger" value="Delete" ng-show="canDeleteAgent()" ng-click="deleteAgents()" ng-disabled="!agentSelected()"/>
            <table class="table table-bordered">
                <tr>
                    <th></th>
                    <th>ID</th>
                    <th>Name</th>
                    <th>Type</th>
                    <th>Created</th>
                    <th>Config</th>
                </tr>
                <tr ng-repeat="agent in agents">
                    <td><input type="checkbox" ng-model="agent.selected" /></td>
                    <td>{{agent.id}}</td>
                    <td>{{agent.name}}</td>
                    <td>{{agent.type}}</td>
                    <td>{{agent.created | date :'MM/dd/yyyy h:mma'}}</td>
                    <td><input type="button" class="btn btn-primary" value="Generate" ng-click="generateConfig(agent.id)" /></td>
                </tr>
            </table>
        </section>
    </section>
</lift:surround>